---
title: System update script
author: mort8088
type: "posts"
date: "2021-12-01T00:00:16+00:00"
url: /2021/12/01/118/
cover: /wp-content/uploads/2022/02/bash-logo-small.webp
authorTwitter: "mort8088" #do not include @
tags : ["Bash", "Linux"]
keywords : ["", ""]
description : ""
showFullContent : false
readingTime : true
hideComments : false
color : "" #color from the theme settings

---
Most Debian based Linux users will just tell you

> It&#8217;s simple just type &#8220;sudo apt update | sudo apt upgrade&#8221;

But at some point you&#8217;re going to want to clean up your package manager or do a full system update and what about FlatPak update?

<!--more-->

## The Script

To those ends, I wrote a bash script called update that lives in my local bin folder (~/bin)

My full script is as follows:-

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo ls ~/ &gt; /dev/null
echo "Starting full system update..."
echo "*** APT ***"
sudo apt update
sudo apt list --upgradable
sudo apt full-upgrade -yy
sudo apt autoremove -yy
sudo apt autoclean -yy

echo "*** FLATPAK ***"
sudo flatpak update

echo "Update Compleate!"</code></pre>
</div>

As you can see it does a little more than your basic update so here&#8217;s the breakdown.

## Getting Started

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo ls ~/ &gt; /dev/null</code></pre>
</div>

Because I use Linux Mint, that has a feature whereby if you execute a command with SuperUserDO and supply your password for a given period of time after you have validated yourself you don&#8217;t need to provide your password to run another SUDO elevated command so this first line is just to get that timer to start, I could error handle the user getting the password wrong and exit but in this script I just let it carry on because you&#8217;ll be prompted for the password again for each command in the script and if you get it wrong for each of them the command will not run until you get it right.

## Advanced Packaging Tool system update

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>echo "Starting full system update..."
echo "*** APT ***"</code></pre>
</div>

with that out of the way we just print out some text so the user knows what&#8217;s happening now, we&#8217;re starting a full system update starting with APT.

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo apt update</code></pre>
</div>

The first APT command download lists of new/upgradable packages.

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo apt list --upgradable</code></pre>
</div>

The second APT command is to let the user know what is going to be updated.

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo apt full-upgrade -yy</code></pre>
</div>

## Advanced Packaging Tool system clean up

The third APT command will upgrade the system by removing/installing/upgrading packages, as opposed to upgrade which will perform a safe upgrade.

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo apt autoremove -yy</code></pre>
</div>

Once the upgrade is complete, the next APT command will remove automatically all unused packages

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>sudo apt autoclean -yy</code></pre>
</div>

Followed by erasing old downloaded archive files.

## FlatPak update

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>echo "*** FLATPAK ***"
sudo flatpak update</code></pre>
</div>

Lastly we print out that we&#8217;re moving on to the FlatPak portion of the update where any FlatPak packages that have been updated are checked and updated, I only added this because I have a few Flatpack apps that I run but apparently this is all you need to do to keep them current.

<div class="hcb_wrap">
  <pre class="prism undefined-numbers lang-bash" data-lang="Bash"><code>echo "Update Complete!"</code></pre>
</div>

Then print out that we are done.